{"ast":null,"code":"import _asyncToGenerator from \"D:/WorkSpace/ProjectContent/IDEAproject/CourseManage/coursemanage_vue/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.array.includes.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport request from \"@/utils/request\";\nexport default {\n  name: 'HomeView',\n  data: function data() {\n    return {\n      tableData: [],\n      dialogFormVisible: false,\n      PICdialogFormVisible: false,\n      form: {},\n      name: \"\",\n      sid: \"\",\n      hours: \"\",\n      headurl: \"\",\n      editForm: {} // 修改信息的表单数据\n\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    request.get(\"http://localhost:8090/student/findall/\").then(function (res) {\n      console.log(res);\n      _this.tableData = res;\n    });\n  },\n  methods: {\n    load: function load() {\n      var _this2 = this;\n\n      request.get(\"http://localhost:8090/student/findall/\").then(function (res) {\n        console.log(res);\n        _this2.tableData = res;\n      });\n    },\n    handleAdd: function handleAdd() {\n      this.dialogFormVisible = true;\n      this.form = {};\n      this.load();\n    },\n    save: function save() {\n      var _this3 = this;\n\n      request.post(\"http://localhost:8090/student/\", this.form).then(function (res) {\n        if (res) {\n          _this3.$message.success(\"保存成功\");\n\n          _this3.dialogFormVisible = false;\n\n          _this3.load();\n        } else {\n          _this3.$message.error(\"保存失败\");\n        }\n      });\n    },\n    deleteStu: function deleteStu(id) {\n      var _this4 = this;\n\n      request.delete(\"http://localhost:8090/student/\" + id).then(function (res) {\n        if (res.code === '200') {\n          _this4.$message.success(\"删除成功\");\n\n          _this4.load();\n        } else {\n          _this4.$message.error(\"删除失败\");\n        }\n      });\n    },\n    handleEdit: function handleEdit(row) {\n      this.form = row;\n      this.dialogFormVisible = true;\n    },\n    updateHeadUrl: function updateHeadUrl() {\n      var _this5 = this;\n\n      request.post(\"http://localhost:8090/student/upload\", this.form).then(function (res) {\n        if (res) {\n          _this5.$message.success(\"保存成功\");\n\n          _this5.PICdialogFormVisible = false;\n\n          _this5.load();\n        } else {\n          _this5.$message.error(\"上传失败\");\n        }\n      });\n    },\n    updateHeadUrlDialog: function updateHeadUrlDialog() {\n      this.PICdialogFormVisible = true;\n    },\n    //处理上传文件\n    handleAvatarSuccess: function handleAvatarSuccess(res) {\n      // 把图片名给img\n      this.editForm.chairImg = res;\n    },\n    beforeAvatarUpload: function beforeAvatarUpload(file) {\n      // 设置限定格式\n      var img_mimetype = ['image/jpeg', 'image/jpg', 'image/png'];\n      var isJPG = img_mimetype.includes(file.type);\n      var isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error('上传头像只能是图片格式!');\n        return false;\n      }\n\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n        return false;\n      }\n\n      return isJPG && isLt2M;\n    },\n    // 提交修改的表单数据\n    editChairmans: function editChairmans() {\n      var _this6 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _yield$_this6$$http$p, rese;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _this6.$http.post('/chairman/editChairmans', _this6.editForm);\n\n              case 2:\n                _yield$_this6$$http$p = _context.sent;\n                rese = _yield$_this6$$http$p.data;\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyKA;AAEA;EACAA,gBADA;EAEAC,IAFA,kBAEA;IACA;MACAC,aADA;MAEAC,wBAFA;MAGAC,2BAHA;MAIAC,QAJA;MAKAL,QALA;MAMAM,OANA;MAOAC,SAPA;MAQAC,WARA;MASAC,YATA,CASA;;IATA;EAWA,CAdA;EAeAC,OAfA,qBAeA;IAAA;;IACAC;MACAC;MACA;IACA,CAHA;EAIA,CApBA;EAqBAC;IACAC,IADA,kBACA;MAAA;;MACAH;QACAC;QACA;MACA,CAHA;IAIA,CANA;IAOAG,SAPA,uBAOA;MACA;MACA;MACA;IACA,CAXA;IAYAC,IAZA,kBAYA;MAAA;;MACAL;QACA;UACA;;UACA;;UACA;QACA,CAJA,MAIA;UACA;QACA;MACA,CARA;IASA,CAtBA;IAuBAM,SAvBA,qBAuBAC,EAvBA,EAuBA;MAAA;;MACAP;QACA;UACA;;UACA;QACA,CAHA,MAGA;UACA;QACA;MACA,CAPA;IAQA,CAhCA;IAiCAQ,UAjCA,sBAiCAC,GAjCA,EAiCA;MACA;MACA;IACA,CApCA;IAqCAC,aArCA,2BAqCA;MAAA;;MACAV;QACA;UACA;;UACA;;UACA;QACA,CAJA,MAIA;UACA;QACA;MACA,CARA;IASA,CA/CA;IAgDAW,mBAhDA,iCAgDA;MACA;IACA,CAlDA;IAmDA;IACAC,mBApDA,+BAoDAC,GApDA,EAoDA;MACA;MACA;IACA,CAvDA;IAwDAC,kBAxDA,8BAwDAC,IAxDA,EAwDA;MACA;MACA;MACA;MACA;;MACA;QACA;QACA;MACA;;MACA;QACA;QACA;MACA;;MACA;IACA,CAtEA;IAuEA;IACAC,aAxEA,2BAwEA;MAAA;;MAAA;QAAA;;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA,6DADA;;cAAA;gBAAA;gBACAC,IADA,yBACA3B,IADA;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;EA1EA;AArBA","names":["name","data","tableData","dialogFormVisible","PICdialogFormVisible","form","sid","hours","headurl","editForm","created","request","console","methods","load","handleAdd","save","deleteStu","id","handleEdit","row","updateHeadUrl","updateHeadUrlDialog","handleAvatarSuccess","res","beforeAvatarUpload","file","editChairmans","rese"],"sourceRoot":"src/views","sources":["HomeView.vue"],"sourcesContent":["<template>\n  <div class=\"home\">\n    <el-container style=\"border: 1px solid #eee\">\n      <el-aside width=\"200px\" style=\"background-color: rgb(238, 241, 246);height: 100%\">\n        <el-menu :default-openeds=\"['1']\">\n          <el-submenu index=\"1\">\n            <template slot=\"title\"><i class=\"el-icon-message\"></i>导航一</template>\n            <el-menu-item-group>\n              <template slot=\"title\">分组一</template>\n              <el-menu-item index=\"1-1\">选项1</el-menu-item>\n              <el-menu-item index=\"1-2\">选项2</el-menu-item>\n            </el-menu-item-group>\n            <el-menu-item-group title=\"分组2\">\n              <el-menu-item index=\"1-3\">选项3</el-menu-item>\n            </el-menu-item-group>\n            <el-submenu index=\"1-4\">\n              <template slot=\"title\">选项4</template>\n              <el-menu-item index=\"1-4-1\">选项4-1</el-menu-item>\n            </el-submenu>\n          </el-submenu>\n          <el-submenu index=\"2\">\n            <template slot=\"title\"><i class=\"el-icon-menu\"></i>导航二</template>\n            <el-menu-item-group>\n              <template slot=\"title\">分组一</template>\n              <el-menu-item index=\"2-1\">选项1</el-menu-item>\n              <el-menu-item index=\"2-2\">选项2</el-menu-item>\n            </el-menu-item-group>\n            <el-menu-item-group title=\"分组2\">\n              <el-menu-item index=\"2-3\">选项3</el-menu-item>\n            </el-menu-item-group>\n            <el-submenu index=\"2-4\">\n              <template slot=\"title\">选项4</template>\n              <el-menu-item index=\"2-4-1\">选项4-1</el-menu-item>\n            </el-submenu>\n          </el-submenu>\n          <el-submenu index=\"3\">\n            <template slot=\"title\"><i class=\"el-icon-setting\"></i>导航三</template>\n            <el-menu-item-group>\n              <template slot=\"title\">分组一</template>\n              <el-menu-item index=\"3-1\">选项1</el-menu-item>\n              <el-menu-item index=\"3-2\">选项2</el-menu-item>\n            </el-menu-item-group>\n            <el-menu-item-group title=\"分组2\">\n              <el-menu-item index=\"3-3\">选项3</el-menu-item>\n            </el-menu-item-group>\n            <el-submenu index=\"3-4\">\n              <template slot=\"title\">选项4</template>\n              <el-menu-item index=\"3-4-1\">选项4-1</el-menu-item>\n            </el-submenu>\n          </el-submenu>\n        </el-menu>\n      </el-aside>\n\n      <el-container>\n\n        <el-header style=\"text-align: right; font-size: 16px; border-bottom: 1px solid #ccc; line-height: 60px\">\n          <el-dropdown>\n            <i class=\"el-icon-setting\" style=\"margin-right: 15px\"></i>\n            <el-dropdown-menu slot=\"dropdown\">\n              <el-dropdown-item>查看</el-dropdown-item>\n              <el-dropdown-item>新增</el-dropdown-item>\n              <el-dropdown-item>删除</el-dropdown-item>\n            </el-dropdown-menu>\n          </el-dropdown>\n          <span>韩慧媛</span>\n        </el-header>\n\n        <el-main>\n\n          <el-button type=\"success\" @click=\"handleAdd\">新增课程</el-button>\n\n          <el-table :data=\"tableData\" border stripe>\n            <el-table-column prop=\"id\" label=\"编号\" width=\"60\">\n            </el-table-column>\n            <el-table-column prop=\"name\" label=\"课程名\" width=\"120\">\n            </el-table-column>\n            <el-table-column prop=\"hours\" label=\"课时\">\n            </el-table-column>\n            <el-table-column prop=\"sid\" label=\"开课学院\">\n            </el-table-column>\n            <el-table-column  label=\"精品图片\">\n              <template slot-scope=\"scope\">\n                <el-popover placement=\"top-start\" title=\"\" trigger=\"hover\">\n                  <img :src=\"scope.row.product.cover\" alt=\"\" style=\"width: 150px;height: 150px\">\n                </el-popover>\n              </template>\n            </el-table-column>\n\n            <el-table-column label=\"操作\">\n              <template slot-scope=\"scope\">\n                <el-button type=\"success\" @click=\"handleEdit(scope.row)\">编辑 <i class=\"el-icon-edit\"></i></el-button>\n                <el-popconfirm\n                    class=\"ml-5\"\n                    confirm-button-text='确定'\n                    cancel-button-text='我再想想'\n                    icon=\"el-icon-info\"\n                    icon-color=\"red\"\n                    title=\"您确定删除吗？\"\n                    @confirm=\"deleteStu(scope.row.id)\"\n                >\n                  <el-button type=\"danger\" slot=\"reference\">删除 <i class=\"el-icon-remove-outline\"></i></el-button>\n                </el-popconfirm>\n                <el-button type=\"primary\" @click=\"updateHeadUrlDialog\">上传图片</el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n\n          <el-dialog title=\"新增/修改课程\" :visible.sync=\"dialogFormVisible\" width=\"40%\">\n            <el-form label-width=\"120px\">\n              <el-form-item label=\"课程名称\">\n                <el-input v-model=\"form.name\" autocomplete=\"off\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"课时\">\n                <el-input v-model=\"form.hours\" autocomplete=\"off\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"所属学院\">\n                <el-select v-model=\"form.sid\" placeholder=\"请选择所属学院\">\n                  <el-option label=\"计算机学院\" value=\"1\"></el-option>\n                  <el-option label=\"外国语学院\" value=\"2\"></el-option>\n                </el-select>\n              </el-form-item>\n\n            </el-form>\n            <div slot=\"footer\" class=\"dialog-footer\">\n              <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n              <el-button type=\"primary\" @click=\"save\">确 定</el-button>\n            </div>\n          </el-dialog>\n\n          <el-dialog title=\"上传图片\" :visible.sync=\"PICdialogFormVisible\" width=\"40%\">\n            <el-form label-width=\"120px\">\n              <el-form-item label=\"上传图片\">\n                <div>\n                  <el-form :model=\"editForm\" :rules=\"editFormRules\" ref=\"editFormRef\" label-width=\"80px\">\n                  </el-form>\n                  <el-form-item label=\"图片\" prop=\"chairImg\">\n                    <el-upload\n                        class=\"avatar-uploader\"\n                        action=\"http://localhost:8090/student/upload\"\n                        :show-file-list=\"false\"\n                        multiple\n                        :limit=\"1\"\n                        :on-success=\"handleAvatarSuccess\"\n                        :before-upload=\"beforeAvatarUpload\">\n                      <!-- 构建虚拟路径 -->\n                      <img v-if=\"editForm.chairImg\" :src=\" 'http://localhost:8090/api/file/' + editForm.chairImg\" class=\"avatar\">\n                      <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n                    </el-upload>\n                  </el-form-item>\n                </div>\n\n              </el-form-item>\n            </el-form>\n\n            <div slot=\"footer\" class=\"dialog-footer\">\n              <el-button @click=\"PICdialogFormVisible = false\">取 消</el-button>\n              <el-button type=\"primary\" @click=\"updateHeadUrl\">确 定</el-button>\n            </div>\n          </el-dialog>\n\n        </el-main>\n      </el-container>\n    </el-container>\n\n  </div>\n</template>\n\n<script>\n\nimport request from \"@/utils/request\";\n\nexport default {\n  name: 'HomeView',\n  data() {\n    return {\n      tableData:[],\n      dialogFormVisible: false,\n      PICdialogFormVisible: false,\n      form: {},\n      name: \"\",\n      sid: \"\",\n      hours: \"\",\n      headurl: \"\",\n      editForm: {}, // 修改信息的表单数据\n    }\n  },\n  created() {\n    request.get(\"http://localhost:8090/student/findall/\").then(res => {\n      console.log(res)\n      this.tableData = res\n    })\n  },\n  methods: {\n    load() {\n      request.get(\"http://localhost:8090/student/findall/\").then(res => {\n        console.log(res)\n        this.tableData = res\n      })\n    },\n    handleAdd() {\n      this.dialogFormVisible=true\n      this.form = {}\n      this.load()\n    },\n    save() {\n      request.post(\"http://localhost:8090/student/\", this.form).then(res =>{\n        if(res) {\n          this.$message.success(\"保存成功\")\n          this.dialogFormVisible = false\n          this.load()\n        } else {\n          this.$message.error(\"保存失败\")\n        }\n      })\n    },\n    deleteStu(id) {\n        request.delete(\"http://localhost:8090/student/\" + id).then(res => {\n          if (res.code === '200') {\n            this.$message.success(\"删除成功\")\n            this.load()\n          } else {\n            this.$message.error(\"删除失败\")\n          }\n        })\n    },\n    handleEdit(row) {\n      this.form = row\n      this.dialogFormVisible = true\n    },\n    updateHeadUrl() {\n      request.post(\"http://localhost:8090/student/upload\", this.form).then(res =>{\n        if(res) {\n          this.$message.success(\"保存成功\")\n          this.PICdialogFormVisible = false\n          this.load()\n        } else {\n          this.$message.error(\"上传失败\")\n        }\n      })\n    },\n    updateHeadUrlDialog() {\n      this.PICdialogFormVisible = true\n    },\n    //处理上传文件\n    handleAvatarSuccess(res) {\n      // 把图片名给img\n      this.editForm.chairImg = res;\n    },\n    beforeAvatarUpload(file) {\n      // 设置限定格式\n      const img_mimetype = ['image/jpeg','image/jpg','image/png']\n      const isJPG =  img_mimetype.includes(file.type);\n      const isLt2M = file.size / 1024 / 1024 < 2;\n      if (!isJPG) {\n        this.$message.error('上传头像只能是图片格式!');\n        return false;\n      }\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n        return false;\n      }\n      return isJPG && isLt2M;\n    },\n    // 提交修改的表单数据\n    async editChairmans() {\n      const {data: rese} = await this.$http.post('/chairman/editChairmans', this.editForm);\n    }\n\n  }\n\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}